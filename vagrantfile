#written by Gaby Tal

Vagrant.configure(2) do |config| 
    config.vm.define "artifactorycilab" do |artifactorycilab|
    config.vm.box = "centos/7"
    config.vm.hostname = 'artifactorycilab' 
    config.vm.network "private_network", ip: "172.16.1.101"
    config.vm.network "forwarded_port", guest: 8081, host: 38081, protocol: "tcp", auto_correct: true
    config.vm.provider 'virtualbox' do |virtualbox|
      virtualbox.linked_clone = true 
      virtualbox.name = 'artifactorycilab'
      virtualbox.gui = false
      virtualbox.memory =  1024
      virtualbox.cpus = 1
      config.vm.provision "shell", path: "machines-user-data/artifactory.sh"
      config.vm.provision "shell", path: "machines-user-data/common.sh"

    end
  end
  config.vm.define "buildservercilab" do |buildservercilab|
    config.vm.box = "centos/7"
    config.vm.hostname = 'buildservercilab' 
    config.vm.network "private_network", ip: "172.16.1.103"
    config.vm.network "forwarded_port", guest: 8080, host: 38080, protocol: "tcp", auto_correct: true
    config.vm.provision "file", source: "machines-user-data/mavencibuild.sh", destination: "~/machines-user-data/mavencibuild.sh"
    config.vm.provider 'virtualbox' do |virtualbox|
      virtualbox.linked_clone = true 
      virtualbox.name = 'buildservercilab'
      virtualbox.gui = false
      virtualbox.memory =  1024
      virtualbox.cpus = 1
      config.vm.provision "shell", path: "machines-user-data/buildserver.sh"
      config.vm.provision "shell", path: "machines-user-data/common.sh"
   end
  end
   config.vm.define "buildnodecilab" do |buildnodecilab|
   config.vm.box = "centos/7"
   config.vm.hostname = 'buildnodecilab' 
   config.vm.network "private_network", ip: "172.16.1.104"
   config.vm.provider 'virtualbox' do |virtualbox|
     virtualbox.linked_clone = true 
     virtualbox.name = 'buildnodecilab'
     virtualbox.gui = false
     virtualbox.memory =  1024
     virtualbox.cpus = 1
     config.vm.provision "shell", path: "machines-user-data/buildnode.sh"
     config.vm.provision "shell", path: "machines-user-data/common.sh"
  end
 end
end